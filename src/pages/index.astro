---
import '../styles/global.css';
import Header from '../components/Header.astro';
import Slider1 from '../components/home-slider/slider-1.astro';
// import Slider2 from "../components/home-slider/slider-2.astro";
import Slider3 from '../components/home-slider/slider-3.astro';
// import Slider4 from "../components/home-slider/slider-4.astro";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
    <link rel="icon" type="image/png" href={`${import.meta.env.BASE_URL}assets/logo/thumbnail-logo.png`} />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>ALIFE - Artificial Life Institute</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href={`${import.meta.env.BASE_URL}fonts/gt-alpina-fine/GT-Alpina-Fine-Standard-Medium.woff2`} as="font" type="font/woff2" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      /* Noise effect */
      .noise-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        opacity: 0.15;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        animation: noise 0.2s infinite;
        mix-blend-mode: overlay;
      }
      @keyframes noise { /* ...same as before... */ }
    </style>
  </head>
  <body class="min-h-screen overflow-x-hidden">
    <!-- Noise overlay -->
    <div class="noise-overlay"></div>
    <Header/>
    <div id="slider-1-background" class="content-fade">
      <Slider1 />
    </div>
    <div id="slider-3-background" class="hidden content-fade">
      <Slider3/>
    </div> 

    <!-- <div id="slider-4-background" class="hidden content-fade">
      <Slider4/>
    </div> -->

    <script>
      // Randomly choose which background to show on page load
      // const backgrounds = ['slider-1', 'slider-3', 'slider-4'];
       const backgrounds = ['slider-1', 'slider-3'];

      const randomBackground = backgrounds[Math.floor(Math.random() * backgrounds.length)];

      // Get background elements
      const slider1 = document.getElementById('slider-1-background');
      const slider3 = document.getElementById('slider-3-background');
      // const slider4 = document.getElementById('slider-4-background');

      // "No-flash" approach: only hide the sliders that are NOT selected
      if (randomBackground === 'slider-1') {
        slider3?.classList.add('hidden');
        slider1?.classList.remove('hidden');
        slider1?.classList.add('active-slider');
      } else {
        slider1?.classList.add('hidden'); 
        slider3?.classList.remove('hidden');
        slider3?.classList.add('active-slider');
      }
      // if (randomBackground === 'slider-1') {
      //   slider1?.classList.remove('hidden');
      //   slider3?.classList.add('hidden');
      //   slider4?.classList.add('hidden');
      // } else if (randomBackground === 'slider-3') {
      //   slider1?.classList.add('hidden');
      //   slider3?.classList.remove('hidden');
      //  slider4?.classList.add('hidden');
      // }
      //  } else { // slider-4
      //    slider1?.classList.add('hidden');
      //    slider3?.classList.add('hidden');
      //    slider4?.classList.remove('hidden');
      //  }

      // Initialize content animations
      setTimeout(() => {
        const contentElements = document.querySelectorAll('.content-fade');
        contentElements.forEach(element => element.classList.add('loaded'));
      }, 100);
    </script>
  </body>
</html>
