---
import '../styles/global.css';
import GreenBubbleBackground from '../components/home-slider/GreenBubbleBackground.astro';
import ParallelogramBackground from '../components/home-slider/ParallelogramBackground.astro';


// Get language from URL parameters or default to English
const urlParams = new URLSearchParams(Astro.url.search);
const lang = urlParams.get('lang') || 'en';

// Simple translation object for server-side rendering
const translations = {
  en: {
    titleLine1: 'Where',
    titleLine2: 'Evolution Meets',
    titleLine3: 'Innovation',
    description: 'We\'re cultivating alternative approaches through evolution itself—creating systems that don\'t just optimize, but discover, surprise, and continuously evolve. This is where we pave a way for a future not engineered, but grown organically through bottom-up ecosystems where humans and artificial life forms collaborate as complementary partners.',
    navigation: {
      about: 'About',
      career: 'Career',
      blog: 'Blog',
      support: 'Support Us'
    }
  },
  jp: {
    titleLine1: '進化と',
    titleLine2: 'イノベーションが',
    titleLine3: '出会う場所',
    description: '私たちは進化そのものを通じて代替的なアプローチを培っています。最適化するだけでなく、発見し、驚かせ、継続的に進化するシステムを創造しています。これは、エンジニアリングされた未来ではなく、人間と人工生命体が補完的なパートナーとして協力するボトムアップエコシステムを通じて有機的に成長する未来への道を切り拓く場所です。',
    navigation: {
      about: '概要',
      career: 'キャリア',
      blog: 'ブログ',
      support: 'サポート'
    }
  }
};

const t = translations[lang as keyof typeof translations] || translations.en;

// We'll handle the random choice on the client side
---

<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>ALIFE - Artificial Life Institute</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body class="min-h-screen overflow-hidden">
    <!-- Backgrounds will be shown/hidden via JavaScript -->
    <div id="gif-background" class="hidden">
      <GreenBubbleBackground lang={lang} translations={t} />
    </div>
    <div id="parallelogram-background" class="hidden">
      <ParallelogramBackground lang={lang} translations={t} />
    </div>

    <script>
      // Randomly choose which background to show on page load
      const backgrounds = ['gif', 'parallelogram'];
      const randomBackground = backgrounds[Math.floor(Math.random() * backgrounds.length)];
      
      // Hide all backgrounds first
      const gifBackground = document.getElementById('gif-background') as HTMLElement;
      const parallelogramBackground = document.getElementById('parallelogram-background') as HTMLElement;
      
      gifBackground?.classList.add('hidden');
      parallelogramBackground?.classList.add('hidden');
      
      // Show the randomly chosen background
      const selectedBackground = document.getElementById(`${randomBackground}-background`) as HTMLElement;
      selectedBackground?.classList.remove('hidden');
    </script>
  </body>
</html>
