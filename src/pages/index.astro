---
import '../styles/global.css';
import WaveParticles from '../components/WaveParticles.astro';
import ParallelogramParticles from '../components/ParallelogramParticles.astro';
import CircularParticles from '../components/CircularParticles.astro';


// Get language from URL parameters or default to English
const urlParams = new URLSearchParams(Astro.url.search);
const lang = urlParams.get('lang') || 'en';

// Simple translation object for server-side rendering
const translations = {
  en: {
    titleLine1: 'Where',
    titleLine2: 'Evolution Meets',
    titleLine3: 'Innovation',
    description: 'We\'re cultivating alternative approaches through evolution itself—creating systems that don\'t just optimize, but discover, surprise, and continuously evolve. This is where we pave a way for a future not engineered, but grown organically through bottom-up ecosystems where humans and artificial life forms collaborate as complementary partners.',
    navigation: {
      about: 'About',
      career: 'Career',
      blog: 'Blog',
      support: 'Support Us'
    }
  },
  jp: {
    titleLine1: '進化と',
    titleLine2: 'イノベーションが',
    titleLine3: '出会う場所',
    description: '私たちは進化そのものを通じて代替的なアプローチを培っています。最適化するだけでなく、発見し、驚かせ、継続的に進化するシステムを創造しています。これは、エンジニアリングされた未来ではなく、人間と人工生命体が補完的なパートナーとして協力するボトムアップエコシステムを通じて有機的に成長する未来への道を切り拓く場所です。',
    navigation: {
      about: '概要',
      career: 'キャリア',
      blog: 'ブログ',
      support: 'サポート'
    }
  }
};

const t = translations[lang as keyof typeof translations] || translations.en;

// Randomly choose which particle system to use on refresh (1 of 3)
const randomChoice = Math.random();
let particleChoice = 'circular'; // default
if (randomChoice < 0.33) {
  particleChoice = 'wave';
} else if (randomChoice < 0.66) {
  particleChoice = 'parallelogram';
}
---

<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>ALIFE - Artificial Life Institute</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body class="min-h-screen overflow-hidden">
    <!-- Randomly chosen particle background with header included -->
    {particleChoice === 'wave' && <WaveParticles lang={lang} translations={t} />}
    {particleChoice === 'parallelogram' && <ParallelogramParticles lang={lang} translations={t} />}
    {particleChoice === 'circular' && <CircularParticles lang={lang} translations={t} />}

  </body>
</html>
