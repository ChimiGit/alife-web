---
// Language Switcher component for ALIFE website
---

<!-- Language Switcher -->
<div class="fixed top-4 right-4 z-50">
  <div class="flex items-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 rounded-lg px-3 py-2">
    <a href="?lang=en" class="no-underline font-medium text-xs transition-colors duration-200 hover:text-accent-cyan text-primary" aria-label="English">EN</a>
    <span class="w-px h-4 bg-gray-300"></span>
    <a href="?lang=jp" class="no-underline font-medium text-xs transition-colors duration-200 hover:text-accent-cyan text-primary" aria-label="Japanese">JP</a>
  </div>
</div>

<script>
  // Get current language from URL or default to English
  function getCurrentLang() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('lang') || 'en';
  }

  // Update active language styling
  function updateActiveLanguage() {
    const currentLang = getCurrentLang();
    const langLinks = document.querySelectorAll('a[href*="lang="]');
    
    langLinks.forEach(link => {
      const href = link.getAttribute('href');
      if (href) {
        if (href.includes(`lang=${currentLang}`)) {
          link.classList.add('text-accent-cyan');
          link.classList.remove('text-primary');
        } else {
          link.classList.remove('text-accent-cyan');
          link.classList.add('text-primary');
        }
      }
    });
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', updateActiveLanguage);
  
  // Update on navigation
  window.addEventListener('popstate', updateActiveLanguage);
</script>
